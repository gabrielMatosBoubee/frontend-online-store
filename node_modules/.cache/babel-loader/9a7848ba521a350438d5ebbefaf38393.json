{"ast":null,"code":"var _jsxFileName = \"/home/boubee/\\xC1rea de Trabalho/projetos/sd-025-b-project-frontend-online-store/src/components/FormComentarios.jsx\";\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport Avaliacao from './Avaliacao';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass FormComentarios extends React.Component {\n  constructor() {\n    super();\n\n    this.cleanInputs = () => {\n      this.setState({\n        email: '',\n        textarea: '',\n        ratingValue: 0,\n        invalidInput: false\n      });\n    };\n\n    this.saveOnLocalStorage = () => {\n      this.cleanInputs();\n      const {\n        email,\n        ratingValue,\n        textarea,\n        productId\n      } = this.state;\n      const comment = {\n        email,\n        textarea,\n        ratingValue\n      };\n      const oldComments = localStorage.getItem(productId);\n\n      if (oldComments) {\n        const oldCommentsPARSE = JSON.parse(oldComments);\n        oldCommentsPARSE.push(comment);\n        const commentJSON = JSON.stringify(oldCommentsPARSE);\n        localStorage.setItem(productId, [commentJSON]);\n        this.setState(prev => ({\n          arrayOfComments: [...prev.arrayOfComments, comment]\n        }));\n      } else {\n        const array = [{\n          email,\n          textarea,\n          ratingValue\n        }];\n        const comentJSON = JSON.stringify(array);\n        localStorage.setItem(productId, [comentJSON]);\n        this.setState({\n          arrayOfComments: [comment]\n        });\n      }\n    };\n\n    this.validateInputs = () => {\n      const {\n        email,\n        ratingValue\n      } = this.state;\n      const emailCheck = email.includes('@') && email.includes('.com');\n      const ratingCheck = ratingValue > 0;\n\n      if (!emailCheck || !ratingCheck) {\n        this.setState({\n          invalidInput: true\n        });\n      } else {\n        this.saveOnLocalStorage();\n        this.setState({\n          invalidInput: false\n        });\n      }\n    };\n\n    this.handleChange = _ref => {\n      let {\n        target: {\n          name,\n          value\n        }\n      } = _ref;\n      this.setState(() => ({\n        [name]: value\n      }));\n    };\n\n    this.saveRating = _ref2 => {\n      let {\n        target\n      } = _ref2;\n      this.setState({\n        ratingValue: target.id\n      });\n    };\n\n    this.state = {\n      email: '',\n      textarea: '',\n      ratingValue: 0,\n      productId: '',\n      invalidInput: false,\n      arrayOfComments: []\n    };\n  }\n\n  componentDidMount() {\n    const {\n      productId\n    } = this.props;\n    const comments = localStorage.getItem(productId);\n    const commentsPARSE = JSON.parse(comments);\n    this.setState({\n      arrayOfComments: commentsPARSE,\n      productId\n    });\n  }\n\n  render() {\n    const {\n      email,\n      ratingValue,\n      textarea,\n      invalidInput,\n      arrayOfComments\n    } = this.state;\n    return /*#__PURE__*/_jsxDEV(\"section\", {\n      children: [/*#__PURE__*/_jsxDEV(\"form\", {\n        children: [invalidInput && /*#__PURE__*/_jsxDEV(\"p\", {\n          \"data-testid\": \"error-msg\",\n          children: \"Campos inv\\xE1lidos\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 81,\n          columnNumber: 28\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"email-input\",\n          children: [\"E-mail\", /*#__PURE__*/_jsxDEV(\"input\", {\n            id: \"email-input\",\n            name: \"email\",\n            \"data-testid\": \"product-detail-email\",\n            value: email,\n            onChange: this.handleChange\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 84,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 82,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Avaliacao, {\n          ratingValue: ratingValue,\n          saveRating: this.saveRating\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n          name: \"textarea\",\n          \"data-testid\": \"product-detail-evaluation\",\n          placeholder: \"Mensagem (opcional)\",\n          value: textarea,\n          onChange: this.handleChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 93,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"button\",\n          \"data-testid\": \"submit-review-btn\",\n          onClick: this.validateInputs,\n          children: \"Avaliar\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 100,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"comments\",\n        children: arrayOfComments && arrayOfComments.map((ele, i) => /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"comment\",\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            \"data-testid\": \"review-card-email\",\n            children: ele.email\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 112,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Avaliacao, {\n            ratingValue: ele.ratingValue\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 113,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            \"data-testid\": \"review-card-evaluation\",\n            children: ele.textarea\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 114,\n            columnNumber: 15\n          }, this)]\n        }, i, true, {\n          fileName: _jsxFileName,\n          lineNumber: 111,\n          columnNumber: 13\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\nFormComentarios.propTypes = {\n  productId: PropTypes.string.isRequired\n};\nexport default FormComentarios;","map":{"version":3,"names":["React","PropTypes","Avaliacao","FormComentarios","Component","constructor","cleanInputs","setState","email","textarea","ratingValue","invalidInput","saveOnLocalStorage","productId","state","comment","oldComments","localStorage","getItem","oldCommentsPARSE","JSON","parse","push","commentJSON","stringify","setItem","prev","arrayOfComments","array","comentJSON","validateInputs","emailCheck","includes","ratingCheck","handleChange","target","name","value","saveRating","id","componentDidMount","props","comments","commentsPARSE","render","map","ele","i","propTypes","string","isRequired"],"sources":["/home/boubee/Área de Trabalho/projetos/sd-025-b-project-frontend-online-store/src/components/FormComentarios.jsx"],"sourcesContent":["import React from 'react';\nimport PropTypes from 'prop-types';\nimport Avaliacao from './Avaliacao';\n\nclass FormComentarios extends React.Component {\n  constructor() {\n    super();\n\n    this.state = {\n      email: '',\n      textarea: '',\n      ratingValue: 0,\n      productId: '',\n      invalidInput: false,\n      arrayOfComments: [],\n    };\n  }\n\n  componentDidMount() {\n    const { productId } = this.props;\n    const comments = localStorage.getItem(productId);\n    const commentsPARSE = JSON.parse(comments);\n    this.setState({ arrayOfComments: commentsPARSE, productId });\n  }\n\n  cleanInputs = () => {\n    this.setState(({\n      email: '',\n      textarea: '',\n      ratingValue: 0,\n      invalidInput: false,\n    }));\n  };\n\n  saveOnLocalStorage = () => {\n    this.cleanInputs();\n    const { email, ratingValue, textarea, productId } = this.state;\n    const comment = { email, textarea, ratingValue };\n    const oldComments = localStorage.getItem(productId);\n    if (oldComments) {\n      const oldCommentsPARSE = JSON.parse(oldComments);\n      oldCommentsPARSE.push(comment);\n      const commentJSON = JSON.stringify(oldCommentsPARSE);\n      localStorage.setItem(productId, [commentJSON]);\n      this.setState((prev) => ({ arrayOfComments: [...prev.arrayOfComments, comment] }));\n    } else {\n      const array = [{ email, textarea, ratingValue }];\n      const comentJSON = JSON.stringify(array);\n      localStorage.setItem(productId, [comentJSON]);\n      this.setState({ arrayOfComments: [comment] });\n    }\n  };\n\n  validateInputs = () => {\n    const { email, ratingValue } = this.state;\n    const emailCheck = email.includes('@') && email.includes('.com');\n    const ratingCheck = ratingValue > 0;\n    if (!emailCheck || !ratingCheck) {\n      this.setState({ invalidInput: true });\n    } else {\n      this.saveOnLocalStorage();\n      this.setState({ invalidInput: false });\n    }\n  };\n\n  handleChange = ({ target: { name, value } }) => {\n    this.setState(() => ({\n      [name]: value,\n    }));\n  };\n\n  saveRating = ({ target }) => {\n    this.setState({ ratingValue: target.id });\n  };\n\n  render() {\n    const { email, ratingValue, textarea, invalidInput, arrayOfComments } = this.state;\n    return (\n      <section>\n        <form>\n          {invalidInput && <p data-testid=\"error-msg\">Campos inválidos</p>}\n          <label htmlFor=\"email-input\">\n            E-mail\n            <input\n              id=\"email-input\"\n              name=\"email\"\n              data-testid=\"product-detail-email\"\n              value={ email }\n              onChange={ this.handleChange }\n            />\n          </label>\n          <Avaliacao ratingValue={ ratingValue } saveRating={ this.saveRating } />\n          <textarea\n            name=\"textarea\"\n            data-testid=\"product-detail-evaluation\"\n            placeholder=\"Mensagem (opcional)\"\n            value={ textarea }\n            onChange={ this.handleChange }\n          />\n          <button\n            type=\"button\"\n            data-testid=\"submit-review-btn\"\n            onClick={ this.validateInputs }\n          >\n            Avaliar\n          </button>\n        </form>\n        <div className=\"comments\">\n          { arrayOfComments\n          && arrayOfComments.map((ele, i) => (\n            <div className=\"comment\" key={ i }>\n              <p data-testid=\"review-card-email\">{ ele.email }</p>\n              <Avaliacao ratingValue={ ele.ratingValue } />\n              <p data-testid=\"review-card-evaluation\">{ ele.textarea }</p>\n            </div>\n          ))}\n        </div>\n      </section>\n    );\n  }\n}\n\nFormComentarios.propTypes = {\n  productId: PropTypes.string.isRequired,\n};\n\nexport default FormComentarios;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}